<section class="container mx-auto">
  Leaderboard
  <div class="grid border border-black grid-cols-5">
    <div class="p-2">Athlete</div>
    <div class="p-2">Total</div>
    <% @workouts.each_with_index do |workout, index| %>
      <div>
        <div class="p-2">Workout <%= index + 1 %></div>
        <div class="p-2"><%= workout.name %></div>
      </div>
    <% end %>
    <% @athletes.each do |athlete| %>
      <div class="flex flex-col p-2">
        <div class="uppercase font-semibold"><%= athlete.full_name %></div>
        <div class="uppercase text-gray-500 text-sm"><%= athlete.box %></div>
      </div>
      <div class="">0</div> <!-- Total placeholder -->
      <% @workouts.each do |workout| %>
        <% score = athlete&.scores&.find_by(workout_id: workout.id) %>
        <div class="flex justify-between px-5 items-center">
          <% if score %>
            <div class="flex gap-5">
              <div class="font-semibold">
                <%= score.points %>
              </div>
              <div>
                <%= score.rank %>
              </div>
              <div>
                <%= score.main_score %>
              </div>
            </div>
            <div class="flex gap-4">
              <%= link_to edit_score_path(score) do %>
                <i class="fa-regular fa-pen-to-square"></i>
              <% end %>
              <%= link_to score, data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } do %>
                <i class="fa-regular fa-trash-can" style="color: #ff0000;"></i>
              <% end %>
            </div>
          <% else %>
            <%= link_to 'Add score', new_score_path(athlete_id: athlete.id, workout_id: workout.id), class: "rounded p-3 bg-gray-500 text-white font-medium w-fit h-fit mx-auto" %>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>
</section>
