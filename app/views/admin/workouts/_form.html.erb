<%= form_with(model: [:admin, workout], class: 'contents') do |form| %>
  <% if workout.errors.any? %>
    <div id='error_explanation' class='bg-red-50 text-red-500 px-3 py-2 font-medium rounded-lg mt-3'>
      <h2><%= pluralize(workout.errors.count, 'error') %> prohibited this workout from being saved:</h2>

      <ul>
        <% workout.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class='my-5'>
    <%= form.label 'NÃºmero de Workout' %>
    <%= form.number_field :workout_number, class: 'block shadow rounded-md border border-gray-200 outline-none px-3 py-2 mt-2 w-full' %>
  </div>

  <div class='my-5'>
    <%= form.label 'Nombre' %>
    <%= form.text_field :name, class: 'block shadow rounded-md border border-gray-200 outline-none px-3 py-2 mt-2 w-full' %>
  </div>

  <div class='my-5'>
    <%= form.label 'Tipo de workout' %>
    <%= form.select :workout_type, ['Time', 'AMRAP', 'Weight'], { include_blank: true }, class: 'block shadow rounded-md border border-gray-200 outline-none px-3 py-2 mt-2 w-full' %>
  </div>

  <!-- Descriptions Fields -->
  <h3>Descriptions</h3>
  <div id='descriptions' data-controller="nested-form">
    <template data-nested-form-target='template'>
      <%= form.fields_for :descriptions, Description.new, child_index: 'NEW_RECORD' do |description| %>
        <%= render 'description_fields', f: description %>
      <% end %>
    </template>

    <%= form.fields_for :descriptions do |description| %>
      <%= render 'description_fields', f: description %>
    <% end %>

    <div data-nested-form-target='links' >
      <%= link_to 'Add Description', '#', class: '', data: { action: 'click->nested-form#add_association' } %>
    </div>
  </div>

  <div class='my-5'>
    <%= form.label 'Tipo de tiebreak' %>
    <%= form.select :tiebreak_type, ['None', 'Time', 'AMRAP', 'Weight'], class: 'block shadow rounded-md border border-gray-200 outline-none px-3 py-2 mt-2 w-full' %>
  </div>

  <div class='my-5'>
    <%= form.label 'Timecap' %>
    <%= form.text_field :time_cap, placeholder: 'MM:SS', value: format_time(workout.time_cap), class: 'block shadow rounded-md border border-gray-200 outline-none px-3 py-2 mt-2 w-full' %>
  </div>

  <div class='my-5 flex items-center gap-3'>
    <%= form.label 'Visible?' %>
    <%= form.check_box :visible, class: 'shadow rounded-md border border-gray-200 outline-none px-3' %>
  </div>

  <div class='inline'>
    <%= form.submit class: 'rounded-lg py-3 px-5 bg-blue-600 text-white inline-block font-medium cursor-pointer' %>
  </div>
<% end %>
